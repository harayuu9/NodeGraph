<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:NodeGraph.App.ViewModels"
             mc:Ignorable="d" d:DesignWidth="250" d:DesignHeight="300"
             x:Class="NodeGraph.App.Controls.GraphListControl"
             x:DataType="vm:DashboardViewModel">

  <Grid RowDefinitions="Auto,*,Auto">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <Border Grid.Row="0"
            Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
            Padding="10,8">
      <TextBlock Text="Graphs"
                 FontWeight="SemiBold"
                 VerticalAlignment="Center" />
    </Border>

    <!-- ã‚°ãƒ©ãƒ•ä¸€è¦§ -->
    <ListBox Grid.Row="1"
             ItemsSource="{Binding SavedGraphs}"
             SelectedItem="{Binding SelectedGraphItem}"
             Background="Transparent"
             Padding="4">
      <ListBox.ItemTemplate>
        <DataTemplate x:DataType="vm:GraphListItemViewModel">
          <Border Padding="8,6"
                  Background="Transparent"
                  CornerRadius="4">
            <Grid ColumnDefinitions="Auto,*">
              <!-- ã‚¢ã‚¤ã‚³ãƒ³ -->
              <TextBlock Grid.Column="0"
                         Text="ðŸ“"
                         Margin="0,0,8,0"
                         VerticalAlignment="Center" />

              <!-- åå‰ (é€šå¸¸è¡¨ç¤º) -->
              <TextBlock Grid.Column="1"
                         Text="{Binding Name}"
                         VerticalAlignment="Center"
                         IsVisible="{Binding !IsRenaming}"
                         TextTrimming="CharacterEllipsis" />

              <!-- åå‰ (ç·¨é›†ãƒ¢ãƒ¼ãƒ‰) -->
              <TextBox Grid.Column="1"
                       Text="{Binding EditingName, Mode=TwoWay}"
                       IsVisible="{Binding IsRenaming}"
                       VerticalAlignment="Center" />
            </Grid>

            <Border.ContextMenu>
              <ContextMenu>
                <MenuItem Header="Rename" Command="{Binding StartRenameCommand}" />
              </ContextMenu>
            </Border.ContextMenu>
          </Border>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ (New Graph ãƒœã‚¿ãƒ³) -->
    <Border Grid.Row="2"
            Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
            Padding="8">
      <StackPanel Orientation="Horizontal" Spacing="8">
        <Button Content="+ New"
                Command="{Binding NewGraphCommand}"
                HorizontalAlignment="Stretch"
                Padding="12,6" />
        <Button Content="Load"
                Command="{Binding LoadSelectedGraphCommand}"
                IsEnabled="{Binding SelectedGraphItem, Converter={x:Static ObjectConverters.IsNotNull}}"
                Padding="12,6" />
        <Button Content="Delete"
                Command="{Binding DeleteSelectedGraphCommand}"
                IsEnabled="{Binding SelectedGraphItem, Converter={x:Static ObjectConverters.IsNotNull}}"
                Padding="12,6" />
      </StackPanel>
    </Border>
  </Grid>
</UserControl>
